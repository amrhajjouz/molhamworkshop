<include-header />

<form class="row" name="updatePlaceForm" request="updatePlace">
  <div class="col-12 col-md-6">
    <div class="form-group">
      <label for="name_ar">اسم المكان العربي</label>
      <input id="name_ar" class="form-control" type="text" ng-class="(updatePlace.errors['name.ar'] != null) ? 'is-invalid' : ''" ng-model="place.name.ar" ng-change="updatePlace.errors['name.ar'] = null" placeholder="الاسم العربي.." ng-error="updatePlace.errors['name.ar']" required/>
    </div>
  </div>

  <div class="col-12 col-md-6">
    <div class="form-group">
      <label for="name_en">اسم المكان الإنكليزي</label>
      <input id="name_en" class="form-control" type="text" ng-class="(updatePlace.errors['name.en'] != null) ? 'is-invalid' : ''" ng-model="place.name.en" ng-change="updatePlace.errors['name.en'] = null" placeholder="الاسم الإنكليزي.." ng-error="updatePlace.errors['name.en']" required/>
    </div>
  </div>

  <div class="col-12 col-md-6">
    <div class="form-group">
      <label for="type">النوع</label>
      <select id="type" class="form-control" ng-model="place.type" ng-class="(updatePlace.errors.type != null) ? 'is-invalid' : ''" ng-options="type.id as type.name for type in types" ng-change="updatePlace.errors.type = null" placeholder="يرجى اختيار نوع.." ng-error="updatePlace.errors.type" required ></select>
    </div>
  </div>

  <div class="col-12 col-md-6" ng-show="place.type == 'province'">
    <div class="form-group">
      <label for="name">الدولة</label>
      <select id="country_code" class="form-control" ng-model="place.country_code" ng-class="(updatePlace.errors.country_code != null) ? 'is-invalid' : ''" ng-change="updatePlace.errors.country_code = null" ng-options="country.code as country.name.ar for country in countries" ng-error="updatePlace.errors.country_code"></select>
    </div>
  </div>
  <div class="col-12 col-md-6" ng-show="!['province' , 'city'].includes(place.type) && place.type != 'city'">
    <div class="form-group">
      <label for="parent_type">نوع المكان الذي تتبع له</label>
      <select id="parent_type" class="form-control" ng-model="place.parent_type" ng-class="(updatePlace.errors.parent_type != null) ? 'is-invalid' : ''" ng-change="handleChangeParentType()" ng-error="updatePlace.errors.parent_type">
        <option value="city">مدينة</option>
        <option value="province">محافظة</option>
      </select>
    </div>
  </div>

  <div class="col-12 col-md-6" ng-show="place.type != 'province' && place.parent_type">
    <div class="form-group">
      <label for="parent_id">المكان الذي تتبع له</label>
      <select2 model="place.parent_id" ajax-url="places/search" error-model="updatePlace.errors.parent_id" ajax-data="{type: place.type == 'city' ? 'city' : place.parent_type}" >
        <option value="{{place.parent_id}}">{{place.parent.name}}</option>
      </select2>
    </div>
  </div>

  <div class="col-12">
    <submit-button form="updatePlaceForm" icon="fe fe-edit">تعديل</submit-button>
  </div>
</form>